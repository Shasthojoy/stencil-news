/*! Built with http://stenciljs.com */

App.defineComponents("4k29d7juvmjz",function(e,t,i,o,r){var n=function(){function e(){this.detail=null,this.saved=!1}return e.prototype.open=function(e){window.open(e)},e.prototype.details=function(e){this.detail=e,setTimeout(function(){document.querySelector("#detailOverlay").className="open"},100)},e.prototype.close=function(){document.querySelector("#detailOverlay").className="",this.detail=null},e.prototype.save=function(e){var t=this;idbKeyval.get("offlineArticles").then(function(i){if(void 0===i){var o=[];o.push(e),idbKeyval.set("offlineArticles",o).then(function(){console.log("article saved"),t.saved=!0,setTimeout(function(){t.saved=!1},2e3)})}else i.push(e),idbKeyval.set("offlineArticles",i).then(function(){console.log("article saved"),t.saved=!0,setTimeout(function(){t.saved=!1},2e3)})})},e.prototype.render=function(){var e=this;if(console.log("render"),!this.detail&&this.articles){var o=this.articles.map(function(o,r){if(o.urlToImage.indexOf("https")>-1)return t("li",{c:r.toString()},t("lazy-img",{p:{src:o.urlToImage,alt:o.title}}),t("div",{a:{id:"card-content"}},t("h3",0,o.title),t("p",{a:{id:"desc"}},o.description),t("div",{a:{id:"actions"}},t("button",{c:{readButton:!0},o:{click:function(){return e.save(o)}}},i("Save")),t("button",{c:{readButton:!0},o:{click:function(){return e.details(o)}}},i("Details")),t("button",{c:{readButton:!0},o:{click:function(){return e.open(o.url)}}},i("Read")),t("share-button",{p:{urlToShare:o.url}},i("Share")))))});return[t("ul",0,o),t("app-toast",{p:{open:this.saved}},i("Article saved offline")),t("lazy-ad",{a:{src:"ads/ad.html"}})]}if(this.detail)return[t("div",{a:{id:"detailOverlay"}},t("button",{o:{click:function(){return e.close()}},a:{id:"closeButton"}},i("Close")),t("img",{p:{src:this.detail.urlToImage,alt:this.detail.title}}),t("h2",0,this.detail.title),t("p",0,i("By "),this.detail.author),t("p",0,this.detail.description),t("button",{o:{click:function(){return e.open(e.detail.url)}},a:{id:"detailRead"}},i("Read")),t("share-button",{a:{id:"shareButton"},p:{urlToShare:this.detail.url}},i("Share")))]},e}(),s=function(){function e(){}return e.prototype.componentWillLoad=function(){var e=this;setTimeout(function(){"IntersectionObserver"in window?"requestIdleCallback"in window?window.requestIdleCallback(function(){e.createIframe(),e._io=new IntersectionObserver(function(t){t[0].intersectionRatio>.011&&(e._iframe.src=e.src,e._io.unobserve(e.el),e.removeIntersectionObserver())}),e._io.observe(e.el)}):setTimeout(function(){e.createIframe(),e._io=new IntersectionObserver(function(t){t[0].intersectionRatio>.011&&(e._iframe.src=e.src,e._io.unobserve(e.el),e.removeIntersectionObserver())}),e._io.observe(e.el)},500):window.setTimeout(function(){e.createIframe(),e._iframe.src=e.src},500)},3e3)},e.prototype.removeIntersectionObserver=function(){this._io&&(this._io.disconnect(),this._io=null)},e.prototype.createIframe=function(){this._iframe=document.createElement("iframe"),this.el.querySelector("div").appendChild(this._iframe),this._iframeCreated=!0},e.prototype.render=function(){return t("div",0)},e}(),c=function(){function e(){}return e.prototype.componentDidLoad=function(){this.addIntersectionObserver()},e.prototype.componentWillUpdate=function(){this.oldSrc&&this.src!==this.oldSrc&&this.addIntersectionObserver(),this.oldSrc=this.src},e.prototype.addIntersectionObserver=function(){var e=this;"IntersectionObserver"in window&&null!==this.src&&(this.io=new IntersectionObserver(function(t){if(t[0].intersectionRatio>.011){console.log("load");var i=e.el.querySelector("img");i.setAttribute("src",i.getAttribute("data-src")),i.onload=function(){i.removeAttribute("data-src")},e.removeIntersectionObserver()}}),this.io.observe(this.el.querySelector("img")))},e.prototype.removeIntersectionObserver=function(){this.io&&(this.io.disconnect(),this.io=null)},e.prototype.render=function(){return t("img",{a:{"data-src":this.src},p:{alt:this.alt}})},e}(),a=function(){function e(){}return e.prototype.share=function(){void 0!==navigator.share?navigator.share({title:"News story",text:"Check out this cool story!",url:this.urlToShare}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing:",e)}):window.open("http://twitter.com/share?text=Check out this cool story!&url="+this.urlToShare)},e.prototype.render=function(){var e=this;return t("button",{o:{click:function(){return e.share()}}},t(0,0))},e}();e["APP-LIST"]=n,e["LAZY-AD"]=s,e["LAZY-IMG"]=c,e["SHARE-BUTTON"]=a},["APP-LIST",{},0,["detail","saved"]],["LAZY-AD",{},0,["_iframe","_iframeCreated","_io"],0,0,0,0,"el"],["LAZY-IMG",{},0,["io","oldSrc"],0,0,0,0,"el"],["SHARE-BUTTON",{}]);